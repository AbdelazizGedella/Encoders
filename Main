<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encoding Report</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; }
        label { font-weight: bold; }
        .container { max-width: 600px; margin: 0 auto; }
        .entry { margin-bottom: 10px; }
        .add-more { color: blue; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <h1>Encoding Report</h1>
    <form id="reportForm">
        <label>Title:</label> <span>Encoding Report</span><br><br>

        <label>Date:</label> <span id="todayDate"></span><br><br>

        <label for="shift">Shift:</label>
        <select id="shift">
            <option value="Day">Day</option>
            <option value="Night">Night</option>
        </select><br><br>

        <label for="mrNo">Patient MRNo.:</label>
        <input type="text" id="mrNo"><br><br>

        <label for="prescriptionIssue">Prescription Issue:</label>
        <input type="text" id="prescriptionIssue" placeholder="Enter drug name and dose"><br><br>

        <label for="physician">Physician:</label>
        <input type="text" id="physician" placeholder="Enter physician name"><br><br>

        <label>Issue related:</label><br>
        <input type="checkbox" id="code" value="Code"> Code
        <input type="checkbox" id="qty" value="Qty"> Qty
        <input type="checkbox" id="dose" value="Dose"> Dose
        <input type="checkbox" id="both" value="Both"> Both<br><br>

        <label>Solution:</label>
        <select id="solution">
            <option value="Changed code">Changed code</option>
            <option value="Changed Qty">Changed Qty</option>
            <option value="Changed Dose">Changed Dose</option>
            <option value="Both">Both</option>
            <option value="Cancelled">Cancelled</option>
        </select><br><br>

        <label>No. of Cancelled Orders:</label>
        <input type="number" id="cancelledOrders"><br><br>

        <label>Not Available Qty Medications:</label>
        <input type="text" id="notAvailableMedications" placeholder="Enter medications name"><br><br>

        <label>Not Available Qty Consumables:</label>
        <input type="text" id="notAvailableConsumables" placeholder="Enter consumables name"><br><br>

        <label>Updates:</label>
        <textarea id="updates" rows="3"></textarea><br><br>

        <button type="button" onclick="generatePDF()">Submit</button>
    </form>
</div>

<script>
    // Display today's date
    document.getElementById('todayDate').innerText = new Date().toLocaleDateString();

    function generatePDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        // Collect data from form
        const shift = document.getElementById('shift').value;
        const mrNo = document.getElementById('mrNo').value;
        const prescriptionIssue = document.getElementById('prescriptionIssue').value;
        const physician = document.getElementById('physician').value;
        
        // Checkbox values
        const issueRelated = [];
        if (document.getElementById('code').checked) issueRelated.push('Code');
        if (document.getElementById('qty').checked) issueRelated.push('Qty');
        if (document.getElementById('dose').checked) issueRelated.push('Dose');
        if (document.getElementById('both').checked) issueRelated.push('Both');

        const solution = document.getElementById('solution').value;
        const cancelledOrders = document.getElementById('cancelledOrders').value;
        const notAvailableMedications = document.getElementById('notAvailableMedications').value;
        const notAvailableConsumables = document.getElementById('notAvailableConsumables').value;
        const updates = document.getElementById('updates').value;

        // Add data to PDF
        doc.text("Encoding Report", 10, 10);
        doc.text(`Date: ${new Date().toLocaleDateString()}`, 10, 20);
        doc.text(`Shift: ${shift}`, 10, 30);
        doc.text(`Patient MRNo.: ${mrNo}`, 10, 40);
        doc.text(`Prescription Issue: ${prescriptionIssue}`, 10, 50);
        doc.text(`Physician: ${physician}`, 10, 60);
        doc.text(`Issue related: ${issueRelated.join(', ')}`, 10, 70);
        doc.text(`Solution: ${solution}`, 10, 80);
        doc.text(`No. of Cancelled Orders: ${cancelledOrders}`, 10, 90);
        doc.text(`Not Available Qty Medications: ${notAvailableMedications}`, 10, 100);
        doc.text(`Not Available Qty Consumables: ${notAvailableConsumables}`, 10, 110);
        doc.text(`Updates: ${updates}`, 10, 120);

        // Save PDF
        doc.save('Encoding_Report.pdf');
    }
</script>

</body>
</html>
